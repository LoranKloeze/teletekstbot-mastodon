package teletekst

import (
	"testing"
)

func TestNOSHtmlToText(t *testing.T) {

	input := "                     <span class=\"green \"> NOS Teletekst</span><span class=\"yellow \"> <a class=\"yellow\" href=\"#110\">110</a> </span>\n<span class=\"yellow \">&#xF020;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;</span>\n <span class=\"blue bg-blue \"> </span><span class=\"blue bg-blue doubleHeight \"> </span><span class=\"yellow bg-blue doubleHeight \"> Boete voor politie om camera-auto's </span>\n                                        \n<span class=\"yellow \">&#xF020;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;</span>\n<span class=\"yellow \">&#xF020;&#xF02f;</span><span class=\"cyan \"> De Autoriteit Persoonsgegevens (AP)  </span>\n<span class=\"cyan \"> legt de politie 50.<a class=\"cyan\" href=\"#000\">000</a> euro boete op   </span>\n<span class=\"cyan \"> voor de inzet van camera-auto's in 2020</span>\n<span class=\"cyan \"> in Rotterdam tijdens corona.Er ontbrak </span>\n<span class=\"cyan \"> een analyse van de privacyrisico's.    </span>\n                                        \n<span class=\"cyan \"> De twee auto's met <a class=\"cyan\" href=\"#360\">360</a>-gradencamera's  </span>\n<span class=\"cyan \"> werden vijf weken lang gebruikt om te  </span>\n<span class=\"cyan \"> controleren of mensen wel 1,5 meter    </span>\n<span class=\"cyan \"> afstand hielden.Met de auto's werden   </span>\n<span class=\"cyan \"> gedetailleerde beelden verzameld die   </span>\n<span class=\"cyan \"> door de politie werden opgeslagen.Tot  </span>\n<span class=\"cyan \"> ver buiten de auto's werden mensen     </span>\n<span class=\"cyan \"> herkenbaar in beeld gebracht.          </span>\n                                        \n<span class=\"cyan \"> Ook werden er te vaak beelden gemaakt  </span>\n<span class=\"cyan \"> die niet noodzakelijk waren,maar daar  </span>\n<span class=\"cyan \"> kan de AP geen boete voor opleggen.    </span>\n<span class=\"yellow \">&#xF020;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;&#xF02c;</span>\n<span class=\"red \"><a id=\"fastText1Red\" class=\"red\" href=\"#111\"> volgende </a></span><span class=\"green \"><a id=\"fastText2Green\" class=\"green\" href=\"#101\"> nieuws </a></span><span class=\"yellow \"><a id=\"fastText3Yellow\" class=\"yellow\" href=\"#701\"> weer&verkeer </a></span><span class=\"cyan \"><a id=\"fastText4Blue\" class=\"cyan\" href=\"#601\"> sport  </a></span>\n"

	exp := " Boete voor politie om camera-auto's \n De Autoriteit Persoonsgegevens (AP)  \n legt de politie 50.\n voor de inzet van camera-auto's in 2020\n in Rotterdam tijdens corona. Er ontbrak \n een analyse van de privacyrisico's.    \n De twee auto's met \n werden vijf weken lang gebruikt om te  \n controleren of mensen wel 1,5 meter    \n afstand hielden. Met de auto's werden   \n gedetailleerde beelden verzameld die   \n door de politie werden opgeslagen. Tot  \n ver buiten de auto's werden mensen     \n herkenbaar in beeld gebracht.          \n Ook werden er te vaak beelden gemaakt  \n die niet noodzakelijk waren, maar daar  \n kan de AP geen boete voor opleggen.    \n"
	got := nosHtmlToText(Page{Content: input})
	if got != exp {
		t.Errorf("Parsing text, expected %s\n\n, got %s", exp, got)
	}

}
